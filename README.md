Объяснение решения нормализации таблиц

1 Нормализация таблиц для добавления новых типов билетов

Решение: Создать новую таблицу ticket_types, которая будет содержать информацию о типах билетов для каждого события.  
В таблице ticket_types можно динамически добавлять новые типы билетов без изменения структуры базы данных.

2 Нормализация таблиц для работы с уникальными баркодами

Решение: Создать таблицу tickets, где каждый билет будет представлен как отдельная строка
У каждого билета будет свой уникальный баркод, что позволяет проверять их отдельно.

Структура таблиц

events — хранит информацию о событиях (id, название, описание, расписание).

orders — хранит информацию о заказах (id, event_id, user_id, дата события, количество билетов по типам, общий штрих-код заказа, общая стоимость).

tickets — хранит информацию о каждом билете (id, order_id, ticket_type_id, уникальный штрих-код).

tickets_types — хранит типы билетов для каждого события (id, event_id, название типа билета, цена).

Функции методы

Конструктор __construct() – подкючение к бд

Деструктор __destruct() – закрывает соединение с бд

Метод json() – принимает массив данных, для отправки данных в формате JSON

Метод sendRequest - для отправки данных в формате JSON и возврата декодированного ответ от API

Функция autoload ($className) – Принимает имя класса как параметр, автоматически подгружает файлы с классам, когда они требуют в коде

Метод book(event_id, event_date и тд) – Принимает параметры для бронирования, отправляет запрос к апи для оформления заказа, возвращает сообщение

Метод approve() – Принимает баркод, отправляет на стороннюю апи запрос с подтверждением, возвращает сообщение

Метод generateBarcode() - генерирует уникальный штрихкод для билета

Метод getEqualPrice() – приминает цены и типы билетов, рассчитывает общую стоимость билетов, возвращает итоговую цену

Метод createOrder() – принимает параметры заказа, создает новый заказ, вызывая API для бронирования билетов и их подтверждения. Если возникла ошибка, он генерирует новый штрихкод и повторяет попытку. После успешного подтверждения заказа, информация о нем сохраняется в базу данных, а билеты для заказа сохраняются в соответствующей таблице.

Метод storeOrder() – принимает параметры заказа, выполняет запрос на добавление записи в бд, возвращает айди последней вставленной строки

Метод storeTicket() – принимает параметры для билетов (айди заказа и массив о билетах), сохраняет билеты в базу данных для каждого типа билета

